#!/usr/bin/env bash

SCRIPT_PATH="$(dirname $0)"

source "$SCRIPT_PATH/../src/cli.sh"
source "$SCRIPT_PATH/../src/ellipsis.sh"
source "$SCRIPT_PATH/../src/git.sh"
source "$SCRIPT_PATH/../src/module.sh"
source "$SCRIPT_PATH/../src/utils.sh"
source "$SCRIPT_PATH/../src/version.sh"

# check for controlling terminal
if [ -t 1 ]; then
    cli.run $@
    exit $?
else
    # strip ansi colors
    cli.run $@ | sed -e 's/\[[^m]*m//g'
    exit $PIPESTATUS # exit with result of first command in pipe, i.e., cli.run
fi
