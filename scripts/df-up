#!/bin/sh

basedir="$( cd -P "$( dirname "$0" )" && pwd )"/..

cd $basedir

if [ -d ".hg" ]; then
    hg pull && hg up
else
    git pull
fi

for dir in `find . -maxdepth 2 -name '.hg' -o -maxdepth 2 -name '.git' | cut -d / -f 2`; do
    cd $basedir/$dir

    if [ -d ".hg" ]; then
        hg pull && hg up
    else
        git pull
    fi

done
